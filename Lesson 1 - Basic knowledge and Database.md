# Lesson 1 - Introduction to SQL
#### __Table of content__<br>
[Basic concept](#Basic-concept)<br>
[Entity Relationship Diagrams](#ERD)<br>
[Common structure of Syntax of SQL](#Common-syntax)<br>
[Compare tools working with different SQL](#SQLtool)<br>  

[Detail of data and requirements](#Detail-of-data)<br>
[Step-by-step to create a simple database](#Step-by-step)<br>
[Identify information related to the table](#table-information)<br>



### <a name="Basic-concept"/>  Basic concepts of datalake, dataware house, database, data, and query languages
<img src="https://user-images.githubusercontent.com/19366516/115987723-763e8c00-a5e0-11eb-83b4-3aa6fcbca640.png" alt="ERD Summary" width= 600 height= 300>

Thinking about structure of an apartment:
- the appartment is a data warehouse, contains  <br>
- many house (database), and each house contains  <br>
- many rooms (schema) <br>

##### Database
- Common understanding: A general term refering to a place used to store data <br>
- Technical understanding: Any collection of data organized for storage, accessibility, and retrieval.Databases use OnLine Transactional Processing (OLTP) to delete, insert, replace, and update large numbers of short online transactions quickly<br>
##### Data Warehouse
- Common Understandinig: Another term refereing to a database.<br>
- Technical understanding: A system contains one or more databases. Data warehouses use OnLine Analytical Processing (OLAP) to analyze massive volumes of data rapidly. This process gives analysts the power to look at your data from different points of view. <br>
##### DataMart
A data mart is a structure / access pattern specific to data warehouse environments, used to retrieve client-facing data. The data mart is a subset of the data warehouse and is usually oriented to a specific business line or team.<br>
##### ETL Process
 A process to Extracts the data from various data source systems, transforms it in the staging area and then finally, loads it into the Data Warehouse system.<br>

#### Transact_SQL vs SQL
|Transact_SQL|SQL|
|------------|------------|
| TSQL mainly used for writing entire program of block function procedure that defines how things need to be complete and creating an application in which each application sending transact query over SQL server and there is no interaction with database|Sybase Informix uses SQL as standard database language for storing retrieving manipulating data and store in a relational database|
|__In-short__: bult-in function in SQL to manage and operate SQL program|__In-short__: query to work with data in a database|
Reference:<br>
- https://www.geeksforgeeks.org/difference-between-sql-and-t-sql/
 
##### Structural types of data

<img src="https://user-images.githubusercontent.com/19366516/115987911-565b9800-a5e1-11eb-84d1-879573411c30.png" alt="Data Structure" width= 600 height= 300>


| Structured Data  | Semi-Structured Data | Non-Structured Data |
| ------------- | ------------- |-------------|
| <img src="https://user-images.githubusercontent.com/19366516/115987922-6a06fe80-a5e1-11eb-914d-75010de3f7ef.png" alt="Data Structure" width= 300 height= 150>  | <img src="https://user-images.githubusercontent.com/19366516/115988002-cec25900-a5e1-11eb-9b46-01991d34ae8f.png" alt="Data Structure" width= 300 height= 150> |<img src="https://user-images.githubusercontent.com/19366516/115988005-d2ee7680-a5e1-11eb-841c-af3edbb11252.png" alt="Data Structure" width= 300 height= 150>|
|Data is organized and classified to an identical structure (internal and external structures)” | Data is organized and classified to an identical structured but they are not integrated|Data is not organized and classified to an identical structure|
| Generated by human and or machine <br> Values are number or text <br> Variables/ fields/ columns are presented in table form <br>Tables are connected relational databases <br> Easiness to search/ extract data by using simple SQL/ MySQL syntax <br> Easiness  to store, manage and maintain data|Have all characteristics of structured data but they are not stored in  relational databases <br> Values are digits and text| Generated by human and or machines <br> Various forms: digits, text, image, sound, video, emails, etc. <br>Complexit y to search and extract value by using simple syntax <br> No model of data <br> Data is stored by  non-relational database (NoSQL) <br> Require large space/ volume to store <br> Hardness to store, mange and maintain due to specific requirements of data system|

<a name="ERD"/>Entity Relationship Diagrams (ERD)
Components of an ERD
Degrees and types of relastionship among entities
<img src="https://user-images.githubusercontent.com/19366516/115988173-9ff8b280-a5e2-11eb-8d1b-5cc0f91a2d86.png" alt="ERD Summary" width= 600 height= 300>


<a name="Common-syntax"/>
Common structure of Syntax of SQL<br>
Non-query operation<br>

```roomsql
-- comment a single line --

select * from table ; -- this is a comment --

/*Comment multiple lines:
- line 1
- line 2
*/

```
Query's structure<br>

```roomsql
-- Basic syntax without condition --
-- Using * to select all columns in a table/ tables --
SELECT * FROM table;

-- Using name(s) for expected column(s) --
Select column1, column2, column3 from table;

```
```roomsql
-- Syntax with condition(s) --
Select * 
from table
where column1 >= 10
;

Select *
from table
where column1 >= 10
and columm2 <= 100
;
```
Overall structure<br>

```roomsql
Select [*][column]
from [table]
where [condion] [ <|>| like]
Group by [column(s)]
Order by [coulmns] [asc|desc] 

```
<a name="SQLtool"/>Compare tools working with different SQL

| |Microsoft SQL Server | MySQL Server| PostgreSQL Server |Oracle|Not Only SQL|
|-----|------------- | ------------- |-------------|-------------|---|
| |<img src="https://user-images.githubusercontent.com/19366516/115988268-041b7680-a5e3-11eb-8064-592ef1f46ea0.png" alt="MSSQL" width= 100 height= 100>|<img src="https://user-images.githubusercontent.com/19366516/115988316-4cd32f80-a5e3-11eb-81ea-b729e2cbd050.png" alt="MYSQL" width= 100 height= 100>|<img src="!https://user-images.githubusercontent.com/19366516/115988326-5fe5ff80-a5e3-11eb-83fc-58579acdccbe.png" alt="PostgreSQL" width= 100 height= 100>|<img src="https://user-images.githubusercontent.com/19366516/115988340-6e341b80-a5e3-11eb-8f63-e2bd4c793919.png)" alt="PLSQL" width= 100 height= 100>|<img src="https://user-images.githubusercontent.com/19366516/115988348-7b510a80-a5e3-11eb-9455-571431ee6910.png" alt="NoSQL" width= 100 height= 100>|
|SQL Type|MSSQL  | MySQL  |PostgreSQL|PLSQL| NoSQL|
|Tools| 1) Microfost SQL Management Studio <br> 2) Azure Data Studio <br> 3) Visual Studio  | MySQL benchwork  |Azure Data Studio| Oracle SQL Developer|MongoDB|

Download links: <br>
- Microfost SQL Management Studio: https://docs.microsoft.com/en-us/sql/ssms/download-sql-server-management-studio-ssms?view=sql-server-ver15
- Azure Data Studio: https://docs.microsoft.com/en-us/sql/azure-data-studio/download-azure-data-studio?view=sql-server-ver15
- Visual Studio (community verstion): https://visualstudio.microsoft.com/downloads/

## Develop a database
### <a name="Detail-of-data"/> Detail of data and requirements
The below table is sample which we often get after querying data in a database. All information is present properly in format:    

|CntCode|	CntName|	RegName|	IGName|
|--------------|--------------|--------------|--------------|
|ABW|	Aruba|	Latin America & Caribbean|	High income|
|AFG|	Afghanistan|	South Asia|	Low income|
|AGO|	Angola|	Sub-Saharan Africa|	Lower middle income|
|ALB|	Albania|	Europe & Central Asia|	Upper middle income|
|AND|	Andorra|	Europe & Central Asia|	High income|


#### Sample SQL syntax (PostgreSQL Syntax)
```roomsql
-- Create a table --
Create table [If not exists] schema.table1(
  Id Serial/ Int, -- "Serial" type for auto-generated integer, "Int" for manual integer --
  Name varchar(255), -- "varchar(255)": maximum length is 255 characters  --
  Rundate Date, -- "Date" type is date format e.g. YYYY/mm/dd--
  Ratio Numeric, -- "Numeric" type  present decimal data (e.g. 1.01, 1.001, etc)
  Constraint PK_ID  PRIMARY KEY (ID) -- Set ID variable as a Primary Key --
);
-- Drop  a table ---
Drop table [if exists] schema.table1;

-- Insert data to a table --
insert into schema.table1 (
  Id, --   if attribute type is int, we need to insert data to Id. if attribute is Serial, we dont need to insert data to ID--
  Name,
  Rundate,
  Ratio,
) values (
  1,
  'A',
  '2021/03/01',
  1.54
);
-- Delete all data in a table -- 
Truncate schema.table1;

-- Delete a single row in a table --
Delete * from schema.table1;

```

### <a name="Step-by-step"/>  Step-by-step to create a simple database
Step 1: Examine table's structure to identify entity, attribute, relationship among tables<br>

Step 2: Draw ERD to visual relationship
- Single tables <br>
  <img src="https://user-images.githubusercontent.com/19366516/116811286-cd110c00-ab72-11eb-8f7d-626bc9e7ccaa.png" alt="signle tables" width= 400 height= 200>

- Tables with relationship 
    - Simple structure - type 1 <br> <img src="https://user-images.githubusercontent.com/19366516/116811164-fd0bdf80-ab71-11eb-81f8-e9108fe6de92.png" alt="type1" width= 450 height= 300>
    - Simple structure - type 2 <br> <img src="https://user-images.githubusercontent.com/19366516/116811178-11e87300-ab72-11eb-919e-5021a368c9ce.png" alt="type2" width= 450 height= 300>

Step 3: Create tables in the database
- Single tables without any relationship
```roomsql
-- Regional table --
CREATE TABLE  IF NOT EXISTS public.region (
RegionID SERIAL, 
RegName varchar(255)
);

-- Income Group --
CREATE TABLE  IF NOT EXISTS public.IncomeGroup (
IGID SERIAL, 
IGName varchar(255)
);

```
- Create tables with relationship, primary key, foreign key(s)
```roomsql
/* Table with Auto-Increment function of ID:
- When a table's ID is set to Auto-Increment (for PostGreSQL - "Serial" type), numbers of ID will be generated automatically. Otherwise, we need to manually fill numbers of ID in the table.
- A Primary Key must be "unique" and "not null" meaning the attribute must have value everytime a new record is created.
*/

-- Regional table auto-Increment--
CREATE TABLE  IF NOT EXISTS public.region (
RegionID SERIAL, 
RegName varchar(255),
Constraint PK_RegionID  PRIMARY KEY (RegionID)
);

-- Regional table manual ID--
CREATE TABLE  IF NOT EXISTS public.region (
RegionID int, 
RegName varchar(255),
Constraint PK_RegionID  PRIMARY KEY (RegionID)
);

```
- Modify tables with drop existing column(s), add new column(s), and change datatype:
```roomsql
-- Add new column(s) to an existing table --
ALTER TABLE public.region 
ADD COLUMN add_column1 VARCHAR
add column add_column2 int
;

-- Change datatype --
ALTER TABLE public.region  
ALTER COLUMN add_column2 TYPE numeric;

-- Drop existing column(s) from a table --
ALTER TABLE public.region 
DROP COLUMN add_column1 
drop column add_column2
;

```
Step 4: Linked between tables by Primary and Foregin keys

```roomsql
Alter table public.Country ADD FOREIGN KEY (RegionID) REFERENCES dbo.Region (RegionID);
Alter table public.Country ADD FOREIGN KEY (IGID) REFERENCES dbo.IncomeGroup (IGID);
```


Step 5: Insert records to each table 
```roomsql
-- Option 1: Rewire inserst query row by row -- 
insert into public.Region (regname) values ('Latin America & Caribbean');
insert into public.Region (regname) values ('South Asia');
insert into public.Region (regname) values  ('Sub-Saharan Africa');

--Optiuon 2: Insert multiple rows to each table  -- 
insert into public.Region (regname) values 
('Latin America & Caribbean'), 
('South Asia'),
('Sub-Saharan Africa');

```
__Excercise__: Import 3 above regions into Region table with manual ID<br>
```roomsql
-- Create table with manual ID --

-- Insert data to table

```
__Note__:<br>
- By defaul, some SQL family allow a maximum of 1000s record each time when we insert multiple rows into a table or select rows from other tables: <br>

"('42000', '[42000] [Microsoft][ODBC SQL Server Driver][SQL Server] <br>
  The number of row value expressions in the INSERT statement exceeds the maximum allowed number of 1000 row values. <br> 
  (10738) (SQLExecDirectW)') " <br>



Step 6: Review created tables
```roomsql
-- Select data from single table --
Select * from public.Region;
```

Additional step: Delete tables having data and relationship <br>
To drop tables which are linked by primary and foreign key, we need to drop constaint (primary key and foreign key) before dropping tables <br>
```roomsql
-- Drop constraint --
ALTER TABLE public.Region DROP CONSTRAINT PK_RegionID;
ALTER TABLE public.Country DROP CONSTRAINT PK_CtnID;
ALTER TABLE public.Country DROP CONSTRAINT FK_RegionID;
ALTER TABLE public.Country DROP CONSTRAINT FK_IGID;

-- drop table --
Drop table if exists public.region;

```
